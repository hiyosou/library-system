<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Book Manager</title>
</head>
<body>
    <h1>📚高橋研究室書籍管理システム</h1>


    <h2>新しい本を登録</h2>
    <form id="addBookForm">
        <input type="text" id="title" placeholder="タイトル" required>
        <input type="text" id="author" placeholder="著者" required>
        <button type="submit">登録</button>
    </form>
    <div id="pushresult" style="margin-top:20px; color:green;"></div>
    <script>
         document.getElementById("addBookForm").addEventListener("submit", async (event) => {
            event.preventDefault();

            const title = document.getElementById("title").value;
            const author = document.getElementById("author").value;

            const response = await fetch("/books", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ title, author })
            });

            const data = await response.json();
            document.getElementById("pushresult").innerText = data.message;
        });
    </script>
    
    <h2>本の情報を更新</h2>
    <form id="updateBookForm">
        <input type="number" id="updateId" placeholder="書籍ID" required>
        <input type="text" id="newTitle" placeholder="新しいタイトル">
        <input type="text" id="newAuthor" placeholder="新しい著者">
        <button type="submit">更新</button>
    </form>
    <div id="putresult" style="margin-top:20px; color:green;"></div>

<script>
         document.getElementById("updateBookForm").addEventListener("submit", async (event) => {
            event.preventDefault();

            const id = document.getElementById("updateId").value;
            const newTitle = document.getElementById("newTitle").value;
            const newAuthor = document.getElementById("newAuthor").value;

            const response = await fetch(`/books/${id}`, {
                method: "PUT",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ title: newTitle, author: newAuthor })
            });

            const data = await response.json();
            document.getElementById("putresult").innerText = data.message;
        });
   </script>

   
</body>
</html>
