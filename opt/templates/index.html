<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Book Manager</title>
</head>
<body>
    <h1>ğŸ“šé«˜æ©‹ç ”ç©¶å®¤æ›¸ç±ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </h1>


    <h2>æ–°ã—ã„æœ¬ã‚’ç™»éŒ²</h2>
    <form id="addBookForm">
        <input type="text" id="title" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" required>
        <input type="text" id="author" placeholder="è‘—è€…" required>
        <button type="submit">ç™»éŒ²</button>
    </form>
    <div id="pushresult" style="margin-top:20px; color:green;"></div>
    <script>
         document.getElementById("addBookForm").addEventListener("submit", async (event) => {
            event.preventDefault();

            const title = document.getElementById("title").value;
            const author = document.getElementById("author").value;

            const response = await fetch("/books", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ title, author })
            });

            const data = await response.json();
            document.getElementById("pushresult").innerText = data.message;
        });
    </script>

        <h2>æ›¸ç±ä¸€è¦§</h2>
        <ul>
            {% for book in books %}
                <li>ID: {{ book.id }} / ã‚¿ã‚¤ãƒˆãƒ«: {{ book.title }} / è‘—è€…: {{ book.author }}</li>
            {% endfor %}
        </ul>
    
    <h2>æœ¬ã®æƒ…å ±ã‚’æ›´æ–°</h2>
    <form id="updateBookForm">
        <input type="number" id="updateId" placeholder="æ›¸ç±ID" required>
        <input type="text" id="newTitle" placeholder="æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«">
        <input type="text" id="newAuthor" placeholder="æ–°ã—ã„è‘—è€…">
        <button type="submit">æ›´æ–°</button>
    </form>
    <div id="putresult" style="margin-top:20px; color:green;"></div>

<script>
         document.getElementById("updateBookForm").addEventListener("submit", async (event) => {
            event.preventDefault();

            const id = document.getElementById("updateId").value;
            const newTitle = document.getElementById("newTitle").value;
            const newAuthor = document.getElementById("newAuthor").value;

            const response = await fetch(`/books/${id}`, {
                method: "PUT",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify({ title: newTitle, author: newAuthor })
            });

            const data = await response.json();
            document.getElementById("putresult").innerText = data.message;
        });
   </script>
   <h2>æœ¬ã‚’å‰Šé™¤</h2>
<form id="deleteBookForm">
    <input type="number" id="deleteId" placeholder="æ›¸ç±ID" required>
    <button type="submit">å‰Šé™¤</button>
</form>
<div id="deleteresult" style="margin-top:20px; color:red;"></div>

<script>
    document.getElementById("deleteBookForm").addEventListener("submit", async (event) => {
        event.preventDefault();

        const id = document.getElementById("deleteId").value;

        const response = await fetch(`/books/${id}`, {
            method: "DELETE",
        });

        const data = await response.json();
        document.getElementById("deleteresult").innerText = data.message;
    });
</script>

   
</body>
</html>
